import { FabricImage } from "fabric";
import { create } from "zustand";

interface node_store_t {
    images: Record<string, FabricImage>,
    set_image: (id: string, image: FabricImage) => void;
}

export const node_store = create<node_store_t>((set) => ({
    images: {},
    set_image: (id, image) => set((state) => ({images: {...state.images, [id]: image}})),
}))

const linear_blur_url = "data:image/png;base64,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";
FabricImage.fromURL(linear_blur_url).then((img) => {
  node_store.getState().set_image("linear-gradient", img);
});